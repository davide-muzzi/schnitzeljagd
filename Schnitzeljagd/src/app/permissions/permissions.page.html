<ion-content class="permissions-page">
  <div class="page">
    <!-- Back button (icon) -->
    <button class="back-btn" (click)="abort()" [routerLink]="['/home']">
      <img src="../assets/icons/arrow_left.svg" alt="Back" />
    </button>

    <!-- Header -->
    <div class="header">
      <div class="header-icon">ğŸ”</div>

      <h1>Berechtigungen</h1>
      <p *ngIf="playerName">Hey {{playerName}}! FÃ¼r die Jagd benÃ¶tigen wir:</p>    
    </div>

    <!-- Standort -->
    <div class="permission-card">
      <div class="perm-top">
        <div class="perm-icon">
          <img src="../assets/icons/pin.svg" alt="Location" />
        </div>
        <h2>Standortzugriff</h2>
      </div>

      <p class="perm-desc">
        Wir benÃ¶tigen deinen Standort, um dich zu den Challenge-Orten zu
        navigieren und deine zurÃ¼ckgelegte Distanz zu messen.
      </p>

      <button *ngIf="!locationGranted"
        class="perm-action location"
        (click)="locationperm()">
        Standort erlauben
      </button>

      <!-- Granted message shows only if granted -->
      <div *ngIf="locationGranted" class="perm-granted">
        <img src="../assets/icons/checkmark_green.svg" alt="Granted" />
        <span>Berechtigung erteilt</span>
      </div>
    </div>

    <!-- Kamera -->
    <div class="permission-card">
      <div class="perm-top">
        <div class="perm-icon">
          <img src="../assets/icons/camera.svg" alt="Camera" />
        </div>
        <h2>Kamerazugriff</h2>
      </div>

      <p class="perm-desc">
        Die Kamera wird benÃ¶tigt, um QR-Codes zu scannen und bestimmte
        Challenges zu erfÃ¼llen.
      </p>

      <button *ngIf="!cameraGranted"
        class="perm-action camera"
        (click)="cameraperm()">
        Kamera erlauben
      </button>

      <div *ngIf="cameraGranted" class="perm-granted">
        <img src="../assets/icons/checkmark_green.svg" alt="Granted" />
        <span>Berechtigung erteilt</span>
      </div>
    </div>

    <!-- Continue -->
    <button class="continue-btn"
      (click)="startGame(playerName)"
      [disabled]="!cameraGranted"
      [class.active]="cameraGranted">
      Jagd beginnen! ğŸ¯
    </button>
  </div>
</ion-content>

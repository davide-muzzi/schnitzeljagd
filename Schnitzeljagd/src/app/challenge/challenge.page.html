<ion-content class="challenge-page">
  <div class="bg-pulse"></div>

  <div class="page">
    <!-- HEADER -->
    <div class="header">
      <div class="header-left">
        <p class="hello">Hey, Dave ðŸ‘‹</p>
        <h1>
          Challenge {{ currentIndex + 1 }}/{{ challenges.length || "Error" }}
        </h1>
      </div>

      <button class="close-btn" (click)="abort()">
        <img src="../assets/icons/x_cross.svg" alt="Close" />
      </button>
    </div>

    <!-- PROGRESS BAR -->
    <div class="progress-bar">
      <div
        class="progress"
        [style.width.%]="challenges.length ? ((currentIndex + 1) / challenges.length) * 100 : 0"
      ></div>
    </div>

    <!-- CHALLENGE ICON -->
    <div class="challenge-icon">
      <div class="status-badge">
        <img src="../assets/icons/lightning_bolt_white.svg" alt="Active" />
      </div>

      <img
        src="../assets/icons/pin.svg"
        alt="Challenge Icon"
        class="main-icon"
      />
    </div>

    <!-- DISTANCE -->
    <div class="distance-info">Noch <strong>137 m</strong> entfernt</div>

    <!-- TITLE -->
    <h2 class="title">{{ currentChallenge?.title || 'Standort finden' }}</h2>

    <!-- DESCRIPTION (FALLBACK ADDED) -->
    <p class="description">
      {{ currentChallenge?.intro || 'Begib dich zum vorgegebenen Standort. Finde
      den Ort mit den Koordinaten.' }}
    </p>

    <!-- STATS -->
    <div class="stats">
      <div class="stat-card">
        <div class="emoji">ðŸ¥©</div>
        <div class="value">{{ gameRun?.schnitzel ?? 0 }}</div>
        <div class="label">Schnitzel</div>
      </div>

      <div class="stat-card">
        <div class="emoji">ðŸ¥”</div>
        <div class="value">{{ gameRun?.kartoffeln ?? 0 }}</div>
        <div class="label">Kartoffeln</div>
      </div>
    </div>

    <!-- PRIMARY ACTION -->
    <button class="primary-btn">
      <img src="../assets/icons/checkmark_white.svg" alt="Check" />
      Challenge abschlieÃŸen
    </button>

    <!-- SKIP -->
    <button class="skip-btn">Challenge Ã¼berspringen</button>
  </div>
</ion-content>
